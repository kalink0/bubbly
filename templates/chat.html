<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chat Export</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- Header placeholder -->
<div id="header">
  <div class="header-actions">
    <button id="toggleHeaderBtn" type="button">Toggle Header</button>
    <button id="exportAnnotationsBtn" type="button">Export Annotations</button>
    <button id="importAnnotationsBtn" type="button">Import Annotations</button>
    <input id="importAnnotationsInput" type="file" accept=".json,application/json" hidden>
    <span id="annotationFeedback" class="annotation-feedback" aria-live="polite"></span>
  </div>
  <div id="headerContent">
    {{header}}
  </div>
</div>

<!-- Search box -->
<div style="max-width: 800px; margin: auto; margin-bottom: 10px;">
  <input type="text" id="searchBox" placeholder="Search messages..." style="width:100%; padding:8px;">
</div>

<!-- Counts -->
<div style="max-width: 800px; margin: auto; margin-bottom: 10px;">
  <span id="messageCount">Showing 0 of 0 messages</span>
</div>

<!-- Filters -->
<div class="filters-row">
  <label class="filter-item">
    <span class="filter-label">Chat:</span>
    <div id="chatFilter" class="single-select"></div>
  </label>
  <label class="filter-item">
    <span class="filter-label">Sender:</span>
    <div id="senderFilter" class="multi-select"></div>
  </label>
  <label class="filter-item">
    <span class="filter-label">Media type:</span>
    <div id="mediaFilter" class="multi-select"></div>
  </label>
  <label class="filter-item">
    <span class="filter-label">Tags:</span>
    <div id="tagFilter" class="multi-select"></div>
  </label>
  <label class="filter-item">
    <span class="filter-label">Time:</span>
    <select id="timePreset">
      <option value="">All time</option>
      <option value="last24h">Last 24 hours</option>
      <option value="last30d">Last 30 days</option>
      <option value="custom">Custom range</option>
    </select>
  </label>
  <span id="timeRange" style="display:none;">
    <label class="filter-item">
      <span class="filter-label">From:</span>
      <input type="datetime-local" id="timeFrom">
    </label>
    <label class="filter-item">
      <span class="filter-label">To:</span>
      <input type="datetime-local" id="timeTo">
    </label>
  </span>
</div>

<!-- Chat container -->
<div id="chat" class="chat"></div>

<!-- Signature -->
{{signature}}


<!-- Embedded messages JSON -->
<script>
const messages = {{messages_json_content}};
</script>

<!-- Lazy-load + search JS -->
<script src="chat.js"></script>
</body>
</html>
